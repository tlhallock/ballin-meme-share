\documentclass{article}

\author{Trever Hallock}
\title{Convenience Share User Manual}

\begin{document}
\maketitle

\tableofcontents

\section{About}

This is a distributed file sharing program.
It is intended to be more convenient to share several files (like say a usb harddrive) than other protocols like bittorrent.
This is because the torrent doesn't need to be manually checksummed and uploaded to a tracker, and individual files can be browsed and downloaded.
It also does not depend on a central tracker location, because anyone can run a tracker and find remotes.
It has much finer ability to control permissions of files that are shared.
It uses encryption.
It is buggy.
It is about to support compression.
It is simple, while providing important features.
It looks ugly.
It requires java, but runs will run on several systems.







\section{Quick Start}
How to...


\subsection{Open the Main Application window}
If the Main Application Window is not visible, you may open it (provided Convenience Share is running) by right clicking on the copyleft icon in the System Tray and selecting ``Show Application". If your system does not support the System tray, it will be a small icon in the lower right hand part of your screen.

\subsection{Find a friend}
There are two ways to add a friend.
If you know your friend's ip address, you can do this:
\begin{itemize}
  \item Open the Machines tab in the application
  \item Click Add to open the Add Machine frame
  \item In the Add machine frame type in the ip, then a colon, then a port like ``192.168.0.1:8990" without quotes
  \item Select the permissions you want for your friend
  \item Hit Add
  \item Under the Machines Panel double click the machine, and select the proper permissions for this machine.
\end{itemize}

If you do not know the IP Address, you can still try to find your friend:
\begin{itemize}
  \item Open the Home panel in the main application
  \item Select Browse Trackers
  \item Double click a tracker from the far left (If there are no trackers, you can add one if you know it's IP.)
  \item If you see the friends Machine under the machines list, double click it
  \item Hit the Open button to open the Add Machine Frame
  \item Select the permissions you want for your friend
  \item Hit Add
  \item Under the Machines Panel double click the machine, and select the proper permissions for this machine.
\end{itemize}

\subsection{Share with a friend}
If you have already added a local directory, and a friend wants to download from it, you can make sure permissions are set properly by doing the following:
\begin{itemize}
  \item Open the Machines panel in the main application
  \item Double click on your friend's machine to open the Machine viewer
  \item Under ``Our Sharing status with them" select DOWNLOADABLE from the drop down.
  \item Close the Machine Viewer Frame
  \item Open the Local Directories panel in the main application
  \item Double click on the root directory containing the file that you want to share to open the Local Directory View frame
  \item Under Global Permission select DOWNLOADABLE from the drop down
  \item Find your friend in the Machine permission, and select DOWNLOADABLE as well
  \item Click save
\end{itemize}

Alternatively, if your friend has requested access, you can do the following:
\begin{itemize}
  \item Open the Messages panel in the main application
  \item Find a message from your friend that has type Request Access
  \item Double click on the message
  \item Select Yes
\end{itemize}

\subsection{Request access to a remote directory}
In order to send a request for access to a remote directory, you can do the following
\begin{itemize}
  \item Open the Machines panel in the main application
  \item Double click on your friend's machine to open the Machine viewer
  \item Next to the They Share With Us label, click the ``Request" button
\end{itemize}

\subsection{Share a directory}
This is how you can share a directory:
\begin{itemize}
  \item Make sure you are already sharing the directory with the remote machine
  \item Open the Local Directories tab in the application
  \item Hit the Add button
  \item Browser to your directory and hit Open
  \item Hit the Synchronize All button or right lick on the newly added directory and select Synchronize
  \item Double click the directory and give the directory a name, tag, description, and permissions that you want. (See permissions)
\end{itemize}

\subsection{Stop sharing a directory}
This is how to remove the directory you just added:
\begin{itemize}
  \item Open the Local Directories tab in the application
  \item Right click on the directory you want to remove, and select Delete
\end{itemize}

\subsection{Download a file}
This is how you can download a file from a remote machine:
\begin{itemize}
  \item Open the Machines tab in the application
  \item Double click on the machine containing the file you want to download or Right click and select open. This will open the machine viewer.
  \item On the machine viewer, hit Synchronize Roots to make sure you are viewing the most recent list of roots on the other machine.
  \item In the paths table (on the far left), double click the root directory that contains the file you want to download
  \item In the files tree (to the right of the paths table), navigate to the path of the file you want to download by expanding its parent directories
  \item Either in the files tree right click the file and select download, or double click the file so that it appears in the files table to the right of the files tree.
  \item If the file appears in the files table, you can either the file itself or right click the file and select Download
  \item Close the Machine Viewer and go back to the main application
  \item Monitor the download status in the Downloads panel in the application
  \item Once it is done, double click on the download to open it
\end{itemize}

\subsection{Map ports}

The best way to map the ports is to launch ``Just launch PortMapper", hit ``Connect"...

\section{General Info}

\subsection{Permissions}

\subsubsection{Permission Meanings}
There are three different permissions Convenience Share uses:

\begin{itemize}
  \item DO\_NOT\_SHARE   This means that no information is sent to the remote aside from your address.
  \item SHARE\_PATHS     This means that a remote can view your shared files, but cannot download them.
  \item DOWNLOADABLE     This means that a remote can view and download your shared files.
\end{itemize}

There are four different places that are in affect.
In order to view or download a file, Convenience Share uses the most restrictive permission between the Machine permission, Default Directory permission, and the Directory per Machine permission.

\subsubsection{Default Permission}
This is a default permission for new machines/local directories.
Whenever you connect to a new machine, or make a new directory, this permission will be saved.
This is set on the Home panel or under the settings panel.

\subsubsection{Machine permission}
Each machine has a permission.
This permission is used to determine if a remove can view your root directories.
If this permission is more strict than a directory permission, this permission will be used.

\subsubsection{Default Directory permission}
Each directory has a permission.
This permission is set in the local directory view under global permission.
You can use this permission to quickly stop sharing a directory to all other machines, without setting the permission for each one.

\subsubsection{Directory per Machine permission}
For each directory, for each machine there is also a permission.
This is in the local directory view under machine permissions.
This allows you to share a directory with all machines except one, or to share a directory with only one machine.

\paragraph{}

For example, suppose machine 1 has a directory ``a", and machine 2 wants to download a file in ``a".
He will not be able to unless machine 1 has permission DOWNLOADABLE for machine 1, directory ``a" has permission DOWNLOADABLE, and directory ``a" is has permission DOWNLOADABLE for machine 2. Another other combination of these three would not let machine 2 download a file in ``a".


\subsubsection{Messages}
Finally one last permission is the permission for a remote machine to send messages from you.
If this is enabled, a remote machine can send you a text message, or a request for permission to view or download your shared files.
Your messages are viewable under the Messages panel.


\subsection{Trackers}
Convenience Share is a distributed file sharing program, so it doesn't need to connect to a main tracker.
However, there is a tracker feature to make it more convenient to find other machines and peers sharing the same file.
Anyone can run the tracker by running the Tracker.jar in the application directory.
The more trackers that are available means there are more ways to find other machines when a tracker is down.

Trackers just maintain a few lists to make certain tasks quicker.
They keep:
\begin{itemize}
  \item A list of machines and checksums that the machine has so that peers can quickly find seeders.
  \item A list of other trackers, so that it is easy to start your own tracker.
  \item A list of comments (only one for each machine per other machine), so that people can trust their downloads.
\end{itemize}


\subsection{Ports}
In order for other machines to be able to connect to your machine, your firewall has to let other machines connect to yours.
Generally, router do not allow incoming connections, so that you must forward ports (parts if a internet address) from your router to the machine running Convenience Share.
Unless you have enabled port forwarding manually by logging in to your router, the best way to forward ports is through UPnP if your router supports it.
Convenience Share uses software called PortMapper to do this.
(It can be found under the libs/ directory where you installed Convenience Share.)

You can change which (and how many) ports Convenience Share listens on in the settings panel or by editing app/settings.props in the application directory.
From the home panel you can click the Map Ports button to launch Convenience Share's port mapper.
This will display what ports Convenience Share is currently telling other machines to use when connecting to your machine.
(These are the ports in the external port range.) These external ports are the ports your router has open.
It will also display what ports it uses to listen on your private lan (internal ports).
These internal ports are the ports your computer has open.

To see the best way to map ports, go to !ref here!

\section{Frames}

\subsection{Application}

\subsubsection{Home}

\subsubsection{Machines}

Each machine has a unique identifier.

\subsubsection{Local Directories}

some local directories are added that contain files downloaded from other machines
Convenience Share will not delete your files from the filesystem, but it will replace files while it downloads them.


\subsubsection{Downloads}

downloads are added to a local directory


\subsubsection{Connections}
This panel shows all connections that are currently open with other machines.
If another machine is hung up and has not closed the connection, you can click the ``Close" button on a given connection to make sure it is closed.
All the statistics related to the connection do not represent bandwidth usage with your ISP, they represent the amount of unecrtyped and uncompressed data Convenience Share is using.
Connections to the Code Updater and to trackers are not represented here right now.

\subsubsection{Messages}
how to send


\subsubsection{Logs}
This shows what Convenience Share is doing.
It can be helpful if it is acting odd or you are not sure what just happened.
You can set the number of lines to log, and the current logging level.
You can tell it to log to a file under settings.
The log level here affects all the logging (including to file/sysout).
Right now, almost all logging is at info level.


\subsubsection{Public Keys}
In order to make sure that you can trust the source of a download, each machine has an RSA public/private key pair.
For strong security you can update the key by hitting the ``Use a new key" button.
However, if you replace all your keys, then the people have shared with you will have to accept the new keys from you.
These RSA keys are used for the initial handshake whenever a connection to a remote machine is opened, and then the stream is encrypted with AES.
Under settings you can change the naunce size you use to authenticate others, and the length of the key used.
The highlighted key is the key used for connections, and the other keys are used to authenticate yourself to a remote machine who has one of your previous keys but does not know your newest key.

The updater also has a key that your machine uses to make sure the code you download is from the original provider.
When you connect to a tracker, the tracker will also remember your key to verify who you are the next time you connect.

\subsection{Port mapper}
\subsection{Machine viewer}
\subsubsection{Machine options}
\subsubsection{Paths table}
\subsubsection{Files tree}
\subsubsection{Files table}
\subsubsection{Directory Options}

\subsection{Local directory view}

\subsubsection{Directory options}

there is a maximum length on the name...
link to permissions
\subsubsection{Directory ignores}
\paragraph{Ignore patterns}

\paragraph{Minimum file size}
you may not need to store empty files

\subsubsection{Machine permissions}

\subsection{Tracker Browser}

how to upload your file meta data so that other can use you as a seeders

how to post a comment

comments are local to a tracker

\subsection{Add Machine Frame}

\subsection{Icon Tray}

It is the copy left symbol.
(That would also be the icon, if java didn't crash on me when I tried to set the icon of a frame.)

Some systems do not support this (KDE), so Convenience Share creates a small JFrame that looks like a system tray.

Closing the application does not shut down Convenience Share.
This is intended to be online often so that others can download your shared files even if you are not using the application.
To shut it down fully, select Quit from the Icon Tray.

\section{How it works}

checksums are sha1 and in the background/before download

chunks

for security no symbolic links are added, and all files should remain inside the root directory


\section {Todos}


First:
\begin{itemize}
\item finish about pane
\item use json for messages (reencrypt the streams)
\item finish user manual
\item test change path of mirror
\item test what happens with two locals by the same name...
\item test tracker gui with remote tracker
\item remove the old messaging system with all bytes (connectionreason), or use it again...
\item max string in json?
\item debug dbbackrestore
\item debug number of files
\end{itemize}
Later:
\begin{itemize}
\item connections need to be revisited
\item remove all caching of db objects...
\item check all settings listeners

machineName          application.refreshMachines
machineIdentifier    application.refreshMachines
defaultPermission    
                     
                     
servePortBeginI      restart handlers (including port mapping), refreshmachines
servePortBeginE      restart handlers (including port mapping), refreshmachines
maxDownloads         initiate downloads
maxSimServers        servermanager
minNaunce            
maxStringSize        
numHandlers          restart handlers (including port mapping), refreshmachines
keySize              
appLocX              
appLocY              
maxDirectorySize     (I guess implement this and have download manager use it)
monitorRepeat        (I guess implement this)
checksumWait         kick checksum thread
maxImmediateChecksum 
logLength            
logToFile            
acceptNewKeys        
shareWithEveryone    
runTrackerOnStart    
autoMapPorts         (something start port mapper if not already started.)
downloadPresentAction
downloadsDirectory   
applicationDirectory 
keysFile             (key manager)
logFile              
dbFile               h2connection cache
codeUpdateKey        update manager ( or remove this setting )
trackerFile          Trackers ( or remove this setting )
colorsFile           Color setter ( or remove this setting )


\item implement popup menu for servetable
\item test with different port numbers
\item profile memory
\item test verify integrity
\item use IOUtils.copy + Files.mkdirs
\item dbl check connection caching
\item add way to change download priority, and test priority
\item compress data (path list, txt files, tracker connection for files, tracker import/exprt, db backup/restore)
\item monitor free space
\item check full path vs fsPath
\item run it for a long time
\item write TONS more tests
\item make the seeders work again
\item download size 0 file

\item close root synchronizer on inactivity
\item change directory name while it is open in the machine viewer
\end{itemize}


\begin{itemize}
\item sync issue on showing duplicate files
\item the tracker message thing does not have proper coloring
\item compress tracker
\item deleting all the downloads hangs and doesn't work.
\item Should there be an option to add filters to a local directory before you synchronize it
\item File getRelativePath
\item the stats on the machine viewer don't update
\item sockets not closing?
\item open containing folder opens the file itself

\item getLogs?  (weird logs, and not closing?)
\item synchronize roots on local machine?


\item files table should accept a boolean for local machine...
\item refresh serve table (finish it, more like)
\item call refresh once from inside the application constructor so that downloads has the correct number of max downloads
\item update request and get logs could have a progress bar...

\item is configure run on startup a toggle menu item?
\item fix "speed will go here on verify integrity"
\item verify integrity might should redownload the meta data if possible...
\item compress database backup
\item ignore patterns are not stored in backup (is there any other reason why they would be lost?)
\item eventually remove all the file logs...

\item on update request with new key:
\end{itemize}

Remote is authenticated.
Adding key to wBsLmZJDrq: 00000081008728B33DFB6F18B32E4E6CF1A8A7646FC2EB15E73F6AA64D4DAC46DF54072B58D259F1A67CC306A77878ADC0EB2F780BF80603D7A8DDF42FA7D2733DF3CC7B11B8E6D1ADFE41A2865075A0552DC34DE527BB5DBAE6C1C7C323EF4FAD76FB8A5D0EC3265ABB83FBD578A9C822AC5863B493A04D37025A686977E3CC618C75A7EB00000003010001
Sending message "Here is a new AES key to encrypt with." to /127.0.0.1:48301
Receiving message of type NewAesKey from 127.0.0.1:48301
Read msg Here is a new AES key to encrypt with. from 127.0.0.1:48301
Receiving message of type UpdateInfoRequestRequest from 127.0.0.1:48301
Read msg Please implement toString() in class org.cnv.shr.msg.swup.UpdateInfoRequestRequest from 127.0.0.1:48301
Sending message "Please implement toString() in class org.cnv.shr.msg.swup.UpdateInfoRequest" to /127.0.0.1:48301
Receiving message of type UpdateInfoMessage from 127.0.0.1:48301
Read msg Please implement toString() in class org.cnv.shr.msg.swup.UpdateInfoMessage from 127.0.0.1:48301
Sending message "done." to /127.0.0.1:48301
Unable to download update.
java.io.IOException: Hit end of stream.
	at org.cnv.shr.util.ByteReader.readInt(ByteReader.java:96)
	at org.cnv.shr.util.ByteReader.readVarByteArray(ByteReader.java:124)
	at org.cnv.shr.dmn.UpdateManager.checkForUpdatesFromServer(UpdateManager.java:227)
	at org.cnv.shr.dmn.UpdateManager.checkForUpdates(UpdateManager.java:144)
	at org.cnv.shr.msg.swup.UpdateInfoMessage.perform(UpdateInfoMessage.java:99)
	at org.cnv.shr.cnctn.ConnectionRunnable.run(ConnectionRunnable.java:73)
	at org.cnv.shr.cnctn.ConnectionManager.handleConnection(ConnectionManager.java:249)
	at org.cnv.shr.dmn.RequestHandler.run(RequestHandler.java:83)
Receiving message of type DoneResponse from 127.0.0.1:48301
Read msg I am done too. from 127.0.0.1:48301











Found this:
Thread 121 count: -1
	stmt #4 tmp=false results:closed query=prep16645: select * from MACHINE where IDENT = ? {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3'}
	stmt #11 tmp=false results:closed query=prep16429: select KEYSTR from PUBLIC_KEY where MID=? order by ADDED desc limit 1; {1: 2}
	stmt #18 tmp=false results:closed query=prep16625: select * from SFILE where F_ID=?; {1: 26188}
	stmt #20 tmp=false results:closed query=prep14556: select * from SFILE where PELEM=? and ROOT=?; {1: 28, 2: 36}
	stmt #33 tmp=false results:closed query=prep14553: select PATTERN from IGNORE_PATTERN where RID=?; {1: 3}
	stmt #34 tmp=false results:closed query=prep16646: select * from ROOT where RNAME=? and MID=?; {1: 'intel', 2: 2}
	stmt #38 tmp=false results:closed query=prep14742: select count(F_ID) as number from SFILE where ROOT = ?; {1: 3}
	stmt #39 tmp=false results:closed query=prep14744: select sum(FSIZE) as totalsize from SFILE where ROOT = ?; {1: 3}
	stmt #45 tmp=false results:closed query=prep14749: update ROOT set PELEM=?, TAGS=?, DESCR=?, TSPACE=?, NFILES=?, RNAME=?, SHARING=?, MIN_SIZE=?, MAX_SIZE=? where ROOT.R_ID = ?; {1: 29, 2: '', 3: '', 4: 12797791063, 5: 19108, 6: 'Documents', 7: 3, 8: -1, 9: -1, 10: 3}
	stmt #51 tmp=false results:closed query=prep14554: select PELEM.P_ID, PELEM.PARENT, PELEM.BROKEN, PELEM.PELEM from PELEM          join ROOT_CONTAINS on ROOT_CONTAINS.RID=? and ROOT_CONTAINS.PELEM = PELEM.P_ID where PELEM.PARENT = ?;                                                         {1: 3, 2: 41738}
	stmt #52 tmp=false results:null query=prep14558: insert into PELEM(PARENT, BROKEN, PELEM) values(?, ?, ?);
	stmt #53 tmp=false results:closed query=prep14557: select P_ID from PELEM where PARENT=? and PELEM=?; {1: 27, 2: 'b'}
	stmt #55 tmp=false results:null query=prep14555: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 36, 2: 0}
	stmt #59 tmp=false results:closed query=prep14559: merge into SFILE key(PELEM, ROOT) values ((select F_ID from SFILE where PELEM=? and ROOT=?), ?, ?, ?, ?, ?, ?, ?, ?); {1: 28, 2: 36, 3: 9216, 4: '', 5: '6f14f0963ac00a6fcda14753ce7a2e700b67eb76', 6: 28, 7: 36, 8: 0, 9: 1429047436000, 10: 0}
	stmt #60 tmp=false results:closed query=prep16657: merge into DOWNLOAD key(FID) values ((select Q_ID from DOWNLOAD where FID=?), ?, ?, ?, ?, ?, ?) {1: 26188, 2: 26188, 3: 1436233654851, 4: 10, 5: 0, 6: '/work/ballin-meme-share/instances/i1/downloads/mirror.intel.K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3/ism/rm/intelremotemondata.db', 7: 1048576}
	stmt #61 tmp=false results:null query=prep16643: delete from DOWNLOAD where FID=? {1: 26188}
	stmt #63 tmp=false results:closed query=prep16624: select * from DOWNLOAD join SFILE on DOWNLOAD.FID=SFILE.F_ID join ROOT on SFILE.ROOT=ROOT.R_ID where ROOT.MID = ?; {1: 2}
	stmt #64 tmp=false results:null query=prep16644: delete from ROOT_CONTAINS where RID in (select R_ID from ROOT where MID=?); {1: 2}
	stmt #70 tmp=false results:closed query=prep16642: select * from CHUNK where DID=?; {1: 1}



and this:
Thread 119 count: -2
	stmt #0 tmp=false results:closed query=prep14276: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 2: 'DsVRDx9yRd', 3: '192.168.1.2', 4: 8990, 5: 10, 6: 1436233632231, 7: 3, 8: 3, 9: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep14275: select * from MACHINE where IDENT = ? {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3'}
	stmt #9 tmp=false results:closed query=prep14264: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '192.168.1.2', 2: 8990, 3: 8990}
	stmt #13 tmp=false results:closed query=prep14277: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100B844F88A28DFF01E9B1C3A29820B1764212F97AAE68C4F8A22108C78EEB7D4D8412A3CF4D6DB679E43FCA15FD4180E529B61066B01AC6B64FEEA9B38AFBD9BB576E0E8A8354BC2030D78F3999CB869148BAB1A475815BF6EE398A2514C1B10BEE3F9943148507FBBD26520D2EE44FF9A060987D45E04015530A8C8E11B54B23100000003010001', 2: 1436233632236, 3: 1436233632236, 4: 2}
	stmt #34 tmp=false results:closed query=prep14348: select * from ROOT where RNAME=? and MID=?; {1: 'intel', 2: 2}
	stmt #52 tmp=false results:null query=prep14691: insert into PELEM(PARENT, BROKEN, PELEM) values(?, ?, ?);
	stmt #53 tmp=false results:closed query=prep14690: select P_ID from PELEM where PARENT=? and PELEM=?; {1: 23, 2: 'rm/'}
	stmt #55 tmp=false results:null query=prep14349: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 36, 2: 0}
Thread 116 count: -2
	stmt #0 tmp=false results:closed query=prep13642: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 2: 'DsVRDx9yRd', 3: '192.168.1.2', 4: 8990, 5: 10, 6: 1436233624607, 7: 3, 8: 3, 9: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep13641: select * from MACHINE where IDENT = ? {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3'}
	stmt #9 tmp=false results:closed query=prep13640: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '192.168.1.2', 2: 8990, 3: 8990}
	stmt #13 tmp=false results:closed query=prep13643: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100B844F88A28DFF01E9B1C3A29820B1764212F97AAE68C4F8A22108C78EEB7D4D8412A3CF4D6DB679E43FCA15FD4180E529B61066B01AC6B64FEEA9B38AFBD9BB576E0E8A8354BC2030D78F3999CB869148BAB1A475815BF6EE398A2514C1B10BEE3F9943148507FBBD26520D2EE44FF9A060987D45E04015530A8C8E11B54B23100000003010001', 2: 1436233624612, 3: 1436233624612, 4: 2}
Thread 118 count: -1
	stmt #0 tmp=false results:closed query=prep14167: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 2: 'DsVRDx9yRd', 3: '192.168.1.2', 4: 8990, 5: 10, 6: 1436233630870, 7: 3, 8: 3, 9: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep14166: select * from MACHINE where IDENT = ? {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3'}
	stmt #9 tmp=false results:closed query=prep14165: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '192.168.1.2', 2: 8990, 3: 8990}
	stmt #13 tmp=false results:closed query=prep14168: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100B844F88A28DFF01E9B1C3A29820B1764212F97AAE68C4F8A22108C78EEB7D4D8412A3CF4D6DB679E43FCA15FD4180E529B61066B01AC6B64FEEA9B38AFBD9BB576E0E8A8354BC2030D78F3999CB869148BAB1A475815BF6EE398A2514C1B10BEE3F9943148507FBBD26520D2EE44FF9A060987D45E04015530A8C8E11B54B23100000003010001', 2: 1436233630875, 3: 1436233630875, 4: 2}
	stmt #37 tmp=false results:closed query=prep14232: select * from ROOT where ROOT.MID = ?; {1: 2}
	stmt #44 tmp=false results:closed query=prep14231: merge into ROOT key(R_ID) VALUES ((select R_ID from ROOT where MID=? and RNAME=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 2, 2: 'intel', 3: 41777, 4: '', 5: '', 6: 2, 7: FALSE, 8: -1, 9: -1, 10: 'intel', 11: 3, 12: -1, 13: -1}
	stmt #52 tmp=false results:null query=prep14230: insert into PELEM(PARENT, BROKEN, PELEM) values(?, ?, ?);
	stmt #53 tmp=false results:closed query=prep14229: select P_ID from PELEM where PARENT=? and PELEM=?; {1: 41776, 2: 'MQ3'}
	stmt #55 tmp=false results:null query=prep14233: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 36, 2: 0}

Thread 100 count: -14
	stmt #0 tmp=false results:closed query=prep5456: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 2: 'DsVRDx9yRd', 3: '192.168.1.2', 4: 8990, 5: 10, 6: 1436233735919, 7: 3, 8: 3, 9: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep5455: select * from MACHINE where IDENT = ? {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3'}
	stmt #9 tmp=false results:closed query=prep5454: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '192.168.1.2', 2: 8990, 3: 8990}
	stmt #13 tmp=false results:closed query=prep5457: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100B844F88A28DFF01E9B1C3A29820B1764212F97AAE68C4F8A22108C78EEB7D4D8412A3CF4D6DB679E43FCA15FD4180E529B61066B01AC6B64FEEA9B38AFBD9BB576E0E8A8354BC2030D78F3999CB869148BAB1A475815BF6EE398A2514C1B10BEE3F9943148507FBBD26520D2EE44FF9A060987D45E04015530A8C8E11B54B23100000003010001', 2: 1436233735924, 3: 1436233735924, 4: 2}
	stmt #34 tmp=false results:closed query=prep5630: select * from ROOT where RNAME=? and MID=?; {1: 'intel', 2: 2}
	stmt #37 tmp=false results:closed query=prep16722: select * from ROOT where ROOT.MID = ?; {1: 2}
	stmt #44 tmp=false results:closed query=prep16721: merge into ROOT key(R_ID) VALUES ((select R_ID from ROOT where MID=? and RNAME=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 2, 2: 'intel', 3: 41777, 4: '', 5: '', 6: 2, 7: FALSE, 8: -1, 9: -1, 10: 'intel', 11: 3, 12: -1, 13: -1}
	stmt #52 tmp=false results:null query=prep5740: insert into PELEM(PARENT, BROKEN, PELEM) values(?, ?, ?);
	stmt #53 tmp=false results:closed query=prep5739: select P_ID from PELEM where PARENT=? and PELEM=?; {1: 41776, 2: 'MQ3'}
	stmt #55 tmp=false results:null query=prep5631: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 36, 2: 0}
Thread 101 count: -2
	stmt #0 tmp=false results:closed query=prep5753: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 2: 'DsVRDx9yRd', 3: '192.168.1.2', 4: 8990, 5: 10, 6: 1436233471150, 7: 3, 8: 3, 9: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep5752: select * from MACHINE where IDENT = ? {1: 'K2dTGwDlkYHNkAG4DMDBtEJPQC91lu3l2Y73JnpL4JQE16TMQ3'}
	stmt #9 tmp=false results:closed query=prep5751: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '192.168.1.2', 2: 8990, 3: 8990}
	stmt #13 tmp=false results:closed query=prep5754: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100B844F88A28DFF01E9B1C3A29820B1764212F97AAE68C4F8A22108C78EEB7D4D8412A3CF4D6DB679E43FCA15FD4180E529B61066B01AC6B64FEEA9B38AFBD9BB576E0E8A8354BC2030D78F3999CB869148BAB1A475815BF6EE398A2514C1B10BEE3F9943148507FBBD26520D2EE44FF9A060987D45E04015530A8C8E11B54B23100000003010001', 2: 1436233471153, 3: 1436233471153, 4: 2}
	stmt #34 tmp=false results:closed query=prep5845: select * from ROOT where RNAME=? and MID=?; {1: 'intel', 2: 3}
	stmt #52 tmp=false results:null query=prep5870: insert into PELEM(PARENT, BROKEN, PELEM) values(?, ?, ?);
	stmt #53 tmp=false results:closed query=prep5869: select P_ID from PELEM where PARENT=? and PELEM=?; {1: 23, 2: 'rm/'}
	stmt #55 tmp=false results:null query=prep5846: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 5, 2: 0}
Thread 103 count: -3
	stmt #0 tmp=false results:closed query=prep6129: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'qBBnCRLhlv878tA1KYXy8hHSaGnWRBPDR0V67XFZ4c6NP99GF5', 2: 'nH3pCoWdTn', 3: '127.0.0.1', 4: 7990, 5: 10, 6: 1436233475725, 7: 3, 8: 3, 9: 'qBBnCRLhlv878tA1KYXy8hHSaGnWRBPDR0V67XFZ4c6NP99GF5', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep6128: select * from MACHINE where IDENT = ? {1: 'qBBnCRLhlv878tA1KYXy8hHSaGnWRBPDR0V67XFZ4c6NP99GF5'}
	stmt #9 tmp=false results:closed query=prep6127: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '127.0.0.1', 2: 7990, 3: 7990}
	stmt #13 tmp=false results:closed query=prep6130: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100C7C5F6EBE7CE841385CF00B61B5B425E3D12B2F5EF976E0C9D5DDBF49F95EA6F79B9ABE6BF7F1F9EB049768633C05BB29604FB1C8B157CE3996FA8F8B147D6385FD405534056CF5C783C674D16162F54CEE9C100DE76D132384B36ABE2E25243145A6E46D3F1FD3BA9E7D1FAF5A48BA63DCACE69DE3D0B763C4859DCB147D85900000003010001', 2: 1436233475730, 3: 1436233475730, 4: 3}
	stmt #34 tmp=false results:closed query=prep6394: select * from ROOT where RNAME=? and MID=?; {1: 'exp', 2: 3}
	stmt #55 tmp=false results:null query=prep6395: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 6, 2: 0}
Thread 73 count: -19
	stmt #0 tmp=false results:closed query=prep604: merge into MACHINE key(IDENT) values ((select M_ID from MACHINE where IDENT=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 'qBBnCRLhlv878tA1KYXy8hHSaGnWRBPDR0V67XFZ4c6NP99GF5', 2: 'nH3pCoWdTn', 3: '127.0.0.1', 4: 7990, 5: 10, 6: 1436233624387, 7: 3, 8: 3, 9: 'qBBnCRLhlv878tA1KYXy8hHSaGnWRBPDR0V67XFZ4c6NP99GF5', 10: FALSE, 11: TRUE, 12: FALSE, 13: TRUE}
	stmt #4 tmp=false results:closed query=prep540: select * from MACHINE where IDENT = ? {1: 'qBBnCRLhlv878tA1KYXy8hHSaGnWRBPDR0V67XFZ4c6NP99GF5'}
	stmt #9 tmp=false results:closed query=prep539: select * from MACHINE where IP = ? and PORT <= ? and PORT + NPORTS >= ? and IS_LOCAL=false LIMIT 1; {1: '127.0.0.1', 2: 7990, 3: 7990}
	stmt #13 tmp=false results:closed query=prep605: merge into PUBLIC_KEY key(MID, KEYSTR) values (DEFAULT, ?, ?, ?, ?); {1: '0000008100C7C5F6EBE7CE841385CF00B61B5B425E3D12B2F5EF976E0C9D5DDBF49F95EA6F79B9ABE6BF7F1F9EB049768633C05BB29604FB1C8B157CE3996FA8F8B147D6385FD405534056CF5C783C674D16162F54CEE9C100DE76D132384B36ABE2E25243145A6E46D3F1FD3BA9E7D1FAF5A48BA63DCACE69DE3D0B763C4859DCB147D85900000003010001', 2: 1436233624393, 3: 1436233624393, 4: 3}
	stmt #34 tmp=false results:closed query=prep704: select * from ROOT where RNAME=? and MID=?; {1: 'intel', 2: 2}
	stmt #37 tmp=false results:closed query=prep12697: select * from ROOT where ROOT.MID = ?; {1: 2}
	stmt #44 tmp=false results:closed query=prep12696: merge into ROOT key(R_ID) VALUES ((select R_ID from ROOT where MID=? and RNAME=?), ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); {1: 2, 2: 'intel', 3: 41777, 4: '', 5: '', 6: 2, 7: FALSE, 8: -1, 9: -1, 10: 'intel', 11: 3, 12: -1, 13: -1}
	stmt #52 tmp=false results:null query=prep2099: insert into PELEM(PARENT, BROKEN, PELEM) values(?, ?, ?);
	stmt #53 tmp=false results:closed query=prep2098: select P_ID from PELEM where PARENT=? and PELEM=?; {1: 23, 2: 'rm/'}
	stmt #55 tmp=false results:null query=prep705: merge into ROOT_CONTAINS key(RID, PELEM) values (?, ?); {1: 36, 2: 0}






















Maybe:
\begin{itemize}
\item Need to check versions when messaging?
\item search by filename across trackers?
\item implement phone service
\item recursive directories in machine viewer
\item filter in machine viewer?
\item could change tracker gui to just ask the store its queries...
\item refactor client.listTrackers
\item Need to break up PathList message
\item see about putting communications in try() {} blocks
\item able to require password to log in for keys file.
\item black list
\item look into ExtendedWatchEventModifier
\item use nio
\end{itemize}


\section{terms}
remote, machine, root directory, 

need to add some pics when is more stable

\end{document}\grid
\grid
